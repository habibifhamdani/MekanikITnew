<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MekanikIT</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="icon" href="assets/img/MekanikIT_logo.svg" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/css/css_reset.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
  </head>

  <body>
    <div class="navbar z-3">
      <a href="#">
        <img
          id="navbar_logo"
          src="assets/img/LogoFinal_transparent.png"
          alt="Logo"
        />
      </a>
      <div class="navbar_right1">
        <a href="#" class="nav_link p1 mx-2">Home</a>
        <a href="#services" class="nav_link p1 mx-2">Services</a>
        <a href="#portfolio" class="nav_link p1 mx-2">Portfolio</a>
        <a href="#contact" class="nav_link p1 mx-2">Contact</a>
      </div>
      <a href="#contact" class="navbar_right1 btn_hero1">
        <p>Hubungi kami!</p>
      </a>
      <div class="navbar_right2">
        <a
          class="d-flex justify-content-center align-items-center"
          href="#contact"
          style="
            width: 50px;
            height: 50px;
            padding: 0;
            background-color: #ff415c;
            color: white;
            border: none;
          "
        >
          <i class="bi bi-chat-text-fill"></i>
        </a>
        <button class="navbar_right2" onclick="toggleMenu()">
          <i id="burger" class="bi bi-three-dots-vertical ps-3"></i>
        </button>
      </div>
      <div id="mobileMenu" class="mobile-menu">
        <a href="#">Home</a>
        <a href="#services">Services</a>
        <a href="#portfolio">Portfolio</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
    <div class="hero">
      <div
        class="container-xxl d-flex flex-column justify-content-center align-items-center text-center"
      >
        <h1 class="h1_hero">
          Solusi <span style="color: var(--accent)">digital</span> andalan untuk
          efisiensi berkelanjutan
        </h1>
        <span style="height: 20px"></span>
        <p class="p2">
          Menghubungkan ide dan teknologi inovatif<br />
          dalam setiap langkah inovasi dan kolaborasi dinamis.
        </p>
        <span style="height: 40px"></span>
        <div class="d-flex flex-row">
          <a href="https://wa.me/6287781896345?text=Halo%2C%20Saya%20ingin%20berkonsultasi%20dengan%20Anda" target="_blank" class="btn_hero1 d-flex">
            <p class="me-2">Konsultasi Langsung</p>
            <i class="bi bi-whatsapp"></i>
          </a>
          <span style="width: 20px"></span>
          <a href="#services" class="btn_hero2">
            <p>Jasa Kami</p>
          </a>
        </div>
      </div>
    </div>
    <div class="invoice_bg mx-auto d-flex flex-column justify-content-center">
      <div
      class="logos row d-flex flex-row align-self-center justify-content-evenly h-auto w-75 container-xxl mx-auto mx-sm-1 pt-4"
      style="min-height: 100px"
    >
      <img class="col-md-4 col-12" src="assets/img/kkp.png" alt="KKP Logo" />
      <img class="col-md-4 col-12" src="assets/img/gef.png" alt="GEF Logo" />
      <img class="col-lg-4 col-md-5 col-12" src="assets/img/usaid.png" alt="USAID Logo" />
    </div>
    <div class="h-auto pt-5 pb-5 d-flex flex-column">
      <div class="row d-flex container-lg flex-md-row flex-column justify-content-center align-items-center align-self-center">
        <div class="col-md-5 col-9 text-md-start text-center pb-3">
          <h1 class="h1_hero1">
            Selama <span style="color: #127aff">6+ tahun</span> kami telah
            merealisasikan proyekmu dan kami bangga atas hal itu!
          </h1>
        </div>
        <div class="col-md-6 col-10 row d-flex justify-content-md-start justify-content-center">
          <div class="col-md-4 col-6 p-md-2 p-0 text-md-start text-center">
            <h1>17+</h1>
            <p class="font-weight-bold">Solusi IT custom</p>
          </div>
          <div class="col-md-4 col-6 p-md-2 p-0 text-md-start text-center">
              <h1>66%</h1>
              <p class="font-weight-bold">Senior programmer</p>
          </div>
          <div class="col-md-4 col-6 p-md-2 p-0 text-md-start text-center">
            <h1>99%</h1>
            <p class="font-weight-bold">Kepuasan klien</p>
          </div>
          <div class="col-md-4 col-6 p-md-2 p-0 text-md-start text-center">
            <h1>20+</h1>
            <p class="font-weight-bold">Tahun pengalaman industri</p>
          </div>
        </div>
      </div>
    </div>
    </div>
    <section id="services">
      <div class="services pb-5">
        <div class="container-lg d-flex flex-column align-items-center pt-5 pb-5 pe-0 ps-0" style="max-width: 1140px;">
          <h1 class="h1_hero mb-5 px-2 text-center">
            <span style="color: var(--accent)">Jasa</span> yang kami sediakan
          </h1>
          <p class="p1 container-lg p-lg-0 px-4">
            Kami adalah MekanikIT, perusahaan pengembangan perangkat lunak yang
            memanfaatkan teknologi untuk menciptakan solusi kustom berdasarkan
            kebutuhan dan tantangan klien. Dipandu oleh prinsip transparansi,
            kolaborasi erat, keahlian, dan proses manajemen serta pengembangan
            yang mapan, kami memberikan layanan terbaik kepada klien kami.
          </p>
        </div>
        <div class="service1">
          <div class="d-flex flex-column" style="width: 30%" id="service1_buttons_container">
            </div>
          <div class="service_scroll">
            <div id="service_content" class="service_content">
                <p id="service_type" class="h1 mb-4 text-start"></p>
                <p id="service_kbli" class="p1"></p>
                <p id="service_description" class="p1 mb-4" style="width: 100%"></p>
            </div>
          </div>
        </div>
        <div class="service2 mx-auto">
          <div class="d-flex flex-column mx-auto" style="width: 85%" id="service2_accordion_container">
            </div>
        </div>
      </div>
      <div class="tech_stack">
        <div class="container-xl p-4 d-flex flex-column">
          <h1 class="h1_hero1 pb-5 border-bottom border-black m-0">
            <span style="color: #60caf6">Core tech stack</span> kami
          </h1>
          <div
            id="backend"
            class="row d-flex align-items-center border-bottom m-0 pt-4 pb-4 border-black"
          >
            <div class="col-lg-3">
              <p class="p1 text-black pb-md-0 pb-4 text-lg-center text-start">Backend</p>
            </div>
            <div class="row d-flex flex-row col-lg-9 m-auto">
              <img
                src="assets/img/php.svg"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="PHP"
              />
              <img
                src="assets/img/golang.png"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="GoLang"
              />
              <img
                src="assets/img/python.png"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="Python"
              />
            </div>
          </div>
          <div
            id="frontend"
            class="row d-flex align-items-center border-bottom m-0 pt-4 pb-4 border-black"
          >
            <div class="col-lg-3">
              <p class="p1 text-black pb-md-0 pb-4 text-lg-center text-start">Frontend</p>
            </div>
            <div class="row d-flex flex-row col-lg-9 m-auto p-4">
              <img
              src="assets/img/js.png"
              class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
              alt="JavaScript"
            />
              <img
                src="assets/img/jquery.svg"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="jQuery"
              />
              <img
                src="assets/img/bootstrap.svg"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="Bootstrap"
              />
            </div>
          </div>
          <div
            id="mobile"
            class="row d-flex align-items-center border-bottom m-0 pt-4 pb-4 border-black"
          >
            <div class="col-lg-3">
              <p class="p1 text-black pb-md-0 pb-4 text-lg-center text-start">Mobile</p>
            </div>
            <div class="row d-flex flex-row col-lg-9 m-auto p-4">
              <img
                src="assets/img/flutter.png"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="Flutter"
              />
              <img
                src="assets/img/ios.png"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="iOS"
              />
              <img
                src="assets/img/android.png"
                class="col-lg-3 col-sm-4 col-6 mb-lg-0 mb-2"
                alt="Android"
              />
            </div>
          </div>
        </div>
      </div>
    </section>
    <section id="portfolio">
      <div class="portfolio container-xl p-4">
        <h1 class="h1_hero text-dark text-sm-start text-center fs-1">Portfolio</h1>
        <span class="d-flex mb-4"></span>
        <ol>
          <li id="2019">
            2019
            <ol type="a">
              <li>PERBAIKAN MODUL APLIKASI SIPEPI
                (2251/KU.110/D.4/PPK/VI/2019) - KKP PDK</li>
              <li>PENYEDERHANAAN DAN INTEGRASI DESAIN WEBSITE DIREKTORAT
                PERIZINAN DAN KENELAYANAN (2724/KU.110/D.4/PPK/VII/2019)
                - KKP PDK</li>
              <li>UPDATING SIMKADA DAN KONEKTIVITAS LKU/LKP
                (3260/KU.110/D.4/PPK/VIII/2019) – KKP PDK</li>
            </ol>
          </li>
          <li id="2020">
            2020
            <ol type="a">
              <li>UPDATING SILAT 2020 (2632 /KU.110/D.4/PPK/VIII/2020) - KKP
                PDK</li>
              <li>UPDATING SIMKADA 2020 (3401 /KU.110/D.4/PPK/X/2020) - KKP
                PDK</li>
              <li>MODUL SMARTCARD PERIZINAN USAHA PERIKANAN TANGKAP
                (4051/KU.110/D.4/PPK/XI/2020) - KKP PDK
                </li>
            </ol>
          </li>
          <li id="2021">
            2021
            <ol type="a">
              <li>UPDATING APLIKASI SILAT DALAM RANGKA PERUBAHAN
                NORMA,STANDAR, PROSEDUR DAN KRITERIA TERKAIT
                PENERBITAN PERATURAN PEMERINTAH NO 5 TAHUN 2021
                (2784/KU.110/D.4/PPK/V/2021) - KKP PDK</li>
              <li>UPDATING APLIKASI SIMKADA DALAM RANGKA PERUBAHAN
                NORMA,STANDAR, PROSEDUR DAN KRITERIA TERKAIT
                PENERBITAN PERATURAN PEMERINTAH NO 5 TAHUN 2021
                (5038/KU.110/D.4/PPK/IX/2021) - KKP PDK</li>
              <li>PENAMBAHAN MODUL PERIZINAN RUMPON DAN PENERAPAN
                PNBP PASCA PRODUKSI PADA APLIKASI SILAT
                (5994/KU.110/D.4/PPK/X/2021) - KKP PDK</li>
            </ol>
          </li>
          <li id="2022">
            2022
            <ol type="a">
              <li>APLIKASI UNTUK PENDATAAN PENDARATAN IKAN DALAM
                RANGKA PELAKSANAAN PNBP PASCA PRODUKSI DAN SISTEM
                KONTRAK - KKP MONEV PELABUHAN</li>
              <li>MODUL PENGEMBANGAN SISTEM KONTRAK PADA APLIKASI SILAT
                - PDK</li>
              <li>MODUL PENGEMBANGAN APLIKASI MOBILE SMART CARD - PDK</li>
              <li>MODUL PENGEMBANGAN SIPR - PDK</li>
              <li>PENGEMBANGAN SISTEM INFORMASI PELABUHAN PERIKANAN -
                PIPP</li>
              <li>PENGEMBANGAN APLIKASI SILAT - PDK</li>
              <li>PENGEMBANGAN APLIKASI SIMKADA - PDK</li>
            </ol>
          </li>
          <li id="2023">
            2023
            <ol type="a">
              <li>PENGEMBANGAN MODUL PENDATAAN PRODUKSI IKAN (PIPP)
                BERBASIS MOBILE</li>
            </ol>
          </li>
        </ol>
      </div>
    </section>
    <section id="contact">
      <div class="container-xxl p-lg-5 p-0 mb-5">
        <div class="contact d-flex flex-column ps-4 pt-5 pb-5 pe-4">
          <h1 class="h1_hero mb-5" style="font-size: 56px;">Hubungi kami!</h1>
          <p class="p1">
            Untuk setiap pertanyaan anda, silakan kirim surel ke
            <a href="mailto:admin@mekanikit.com" class="fw-bold contact_link" style="color: white;">admin@mekanikit.com</a>
          </p>

          <form action="send.php" method="POST" class="mt-4 d-flex flex-column">
            <div class="mb-3">
              <label for="nama" class="form-label p1"
                >Nama<span style="color: red">*</span></label
              >
              <input
                type="text"
                class="form-control"
                id="nama"
                name="nama"
                required
              />
            </div>

            <div class="mb-3">
              <label for="email" class="form-label p1"
                >Surel<span style="color: red">*</span></label
              >
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                required
              />
            </div>

            <div class="mb-3">
              <label for="pesan" class="form-label p1"
                >Pesan<span style="color: red">*</span></label
              >
              <textarea
                class="form-control"
                id="pesan"
                name="pesan"
                rows="4"
                required
              ></textarea>
            </div>

            <button type="submit" class="btn_hero1 align-self-end">
              Kirim
            </button>
          </form>
        </div>
      </div>
    </section>
    <div class="footer">
      <div class="d-flex flex-column align-items-center px-xl-0 px-3 py-5">
        <img
        src="assets/img/LogoFinal_white_transparent.png"
        class="object-fit-contain align-self-start mb-4"
        style="height: 100px;"
        alt="MekanikIT Logo White"
      />
      <div class="footer_container container-xl">
        <div class="footer_column pb-md-0 pb-4">
          <p class="fw-bold">Alamat:</p>
          <p>Komplek Lipi 1 (Puri Citayam Permai) B11/9</p>
          <p>08170260380</p>
          <p class="fw-bold">Pusat Pengembangan:</p>
          <p>Citayam, Jawa Barat</p>
          <p><a href="mailto:admin@MekanikIT.com">admin@MekanikIT.com</a></p>
        </div>
        <div class="footer_column footer_service1 pb-md-0 pb-4">
          <p class="fw-bold">Services</p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pengembangan Video Game')">Aktivitas Pengembangan Video Game</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pengembangan Aplikasi Perdagangan Melalui Internet (E-Commerce)')">Aktivitas Pengembangan Aplikasi Perdagangan Melalui Internet (E-Commerce)</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pemrograman Komputer Lainnya')">Aktivitas Pemrograman Komputer Lainnya</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Konsultasi Komputer dan Manajemen Fasilitas Komputer Lainnya')">Aktivitas Konsultasi Komputer dan Manajemen Fasilitas Komputer Lainnya</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Teknologi Informasi dan Jasa Komputer Lainnya')">Aktivitas Teknologi Informasi dan Jasa Komputer Lainnya</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Portal Web dan/atau Platform Digital dengan Tujuan Komersial')">Portal Web dan/atau Platform Digital dengan Tujuan Komersial</a></p>
          <p><a class="footer_service1_a" href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Konsultasi Manajemen Lainnya')">Aktivitas Konsultasi Manajemen Lainnya</a></p>
        </div>
        <div class="footer_column footer_service2"> <p class="fw-bold">Services</p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pengembangan Video Game')">Aktivitas Pengembangan Video Game</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pengembangan Aplikasi Perdagangan Melalui Internet (E-Commerce)')">Aktivitas Pengembangan Aplikasi Perdagangan Melalui Internet (E-Commerce)</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Pemrograman Komputer Lainnya')">Aktivitas Pemrograman Komputer Lainnya</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Konsultasi Komputer dan Manajemen Fasilitas Komputer Lainnya')">Aktivitas Konsultasi Komputer dan Manajemen Fasilitas Komputer Lainnya</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Teknologi Informasi dan Jasa Komputer Lainnya')">Aktivitas Teknologi Informasi dan Jasa Komputer Lainnya</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Portal Web dan/atau Platform Digital dengan Tujuan Komersial')">Portal Web dan/atau Platform Digital dengan Tujuan Komersial</a></p>
          <p><a href="#services" onclick="window.updateServiceByTitleFromFooter('Aktivitas Konsultasi Manajemen Lainnya')">Aktivitas Konsultasi Manajemen Lainnya</a></p>
        </div>
        <div class="footer_column pb-md-0 pb-4">
          <p class="fw-bold">Technologies</p>
          <p><a href="#backend">Backend</a></p>
          <p><a href="#frontend">Frontend</a></p>
          <p><a href="#mobile">Mobile</a></p>
        </div>
        <div class="footer_column">
          <p class="fw-bold">Portfolio</p>
          <p><a href="#2019">2019</a></p>
          <p><a href="#2020">2020</a></p>
          <p><a href="#2021">2021</a></p>
          <p><a href="#2022">2022</a></p>
          <p><a href="#2023">2023</a></p>
        </div>
      </div>
      <div class="footer_bottom">
      <div class="d-flex flex-md-row flex-column justify-content-md-end justify-content-start align-items-md-start">
        <p class="fs-6 me-md-2">© 2025 MekanikIT™ All rights reserved. (R)</p>
      </div>
      </div>
    </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        window.allServicesData = []; // Stores data from services.json
        let lastActiveDesktopButtonId = null; // Remembers active button for desktop on resize

        // DOM Element Getters
        const service1ButtonsContainer = document.getElementById("service1_buttons_container");
        const service2AccordionContainer = document.getElementById("service2_accordion_container");
        const serviceTypeEl = document.getElementById("service_type");
        const serviceKbliEl = document.getElementById("service_kbli");
        const serviceDescriptionEl = document.getElementById("service_description");

        // Fetches service data from JSON file
        async function fetchServices() {
          try {
            const response = await fetch('assets/data/services.json'); // Ensure this path is correct
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            window.allServicesData = await response.json();
            populateServicesUI(); // Populate UI after data is fetched

            // Set default view for desktop if screen width allows and data exists
            if (window.allServicesData.length > 0 && window.innerWidth > 1200) {
              window.displayServiceInDesktopView(window.allServicesData[0].id);
              lastActiveDesktopButtonId = `service1-btn-${window.allServicesData[0].id}`;
            }
          } catch (error) {
            console.error("Could not fetch or process services:", error);
            if(service1ButtonsContainer) service1ButtonsContainer.innerHTML = "<p class='text-danger p-3'>Error loading services.</p>";
            if(service2AccordionContainer) service2AccordionContainer.innerHTML = "<p class='text-danger p-3'>Error loading services.</p>";
          }
        }

        // Populates the service UI for both desktop and mobile views
        function populateServicesUI() {
          if (!service1ButtonsContainer || !service2AccordionContainer) {
            console.error("Service containers not found!");
            return;
          }
          service1ButtonsContainer.innerHTML = ''; // Clear previous content
          service2AccordionContainer.innerHTML = ''; // Clear previous content

          window.allServicesData.forEach(service => {
            // --- Populate .service1 (Desktop View Buttons) ---
            const desktopButton = document.createElement('button');
            desktopButton.id = `service1-btn-${service.id}`;
            desktopButton.className = 'btn_service';
            desktopButton.innerHTML = `<p class="p1">${service.title}</p>`;
            desktopButton.onclick = () => window.displayServiceInDesktopView(service.id);
            service1ButtonsContainer.appendChild(desktopButton);

            // --- Populate .service2 (Mobile View Accordion) ---
            const mobileButton = document.createElement('button');
            mobileButton.id = `service2-btn-${service.id}`;
            mobileButton.className = 'btn_service';
            mobileButton.onclick = () => window.toggleMobileDropdown(`content-${service.id}`);
            mobileButton.innerHTML = `
              <p class="p1">${service.title}</p>
              <i class="bi bi-arrow-down-square text-white"></i>
            `;
            service2AccordionContainer.appendChild(mobileButton);

            const mobileContent = document.createElement('div');
            mobileContent.id = `content-${service.id}`;
            mobileContent.className = 'dropdown_content';
            mobileContent.innerHTML = `
              <p class="p1">${service.kbli}</p>
              <p class="p1">${service.description}</p>
            `;
            service2AccordionContainer.appendChild(mobileContent);
          });
        }

        // Displays a selected service in the desktop view area
        window.displayServiceInDesktopView = function(serviceId) {
          const service = window.allServicesData.find(s => s.id === serviceId);
          if (!service) {
            console.warn(`Service with ID "${serviceId}" not found for desktop view.`);
            return;
          }

          if (serviceTypeEl) serviceTypeEl.textContent = service.title;
          if (serviceKbliEl) serviceKbliEl.textContent = service.kbli;
          if (serviceDescriptionEl) serviceDescriptionEl.textContent = service.description;

          document.querySelectorAll('#service1_buttons_container .btn_service').forEach(btn => {
            btn.classList.remove('active');
          });
          const activeButton = document.getElementById(`service1-btn-${serviceId}`);
          if (activeButton) {
            activeButton.classList.add('active');
            lastActiveDesktopButtonId = activeButton.id;
          }
        };
        
        // Toggles a specific mobile dropdown (accordion item)
        window.toggleMobileDropdown = function(clickedContentId) {
          const allDropdownContents = document.querySelectorAll('#service2_accordion_container .dropdown_content');
          const clickedContentElement = document.getElementById(clickedContentId);

          if (!clickedContentElement) {
            console.warn(`Content element with ID "${clickedContentId}" not found for toggle.`);
            return;
          }

          const wasClickedItemEffectivelyOpen = clickedContentElement.style.maxHeight && clickedContentElement.style.maxHeight !== "0px";

          allDropdownContents.forEach(contentElement => {
            const button = contentElement.previousElementSibling;
            const icon = button ? button.querySelector('i') : null;

            if (contentElement.id !== clickedContentId || wasClickedItemEffectivelyOpen) {
              contentElement.style.maxHeight = null; 
              if (icon) {
                icon.classList.remove('bi-arrow-up-square');
                icon.classList.add('bi-arrow-down-square');
              }
            }
          });

          if (!wasClickedItemEffectivelyOpen) {
            clickedContentElement.style.maxHeight = clickedContentElement.scrollHeight + "px";
            const clickedButton = clickedContentElement.previousElementSibling;
            const clickedIcon = clickedButton ? clickedButton.querySelector('i') : null;
            if (clickedIcon) {
              clickedIcon.classList.remove('bi-arrow-down-square');
              clickedIcon.classList.add('bi-arrow-up-square');
            }
          }
        };

        // Programmatically activates a mobile service accordion item
        window.activateMobileServiceAccordion = function(serviceId) {
          const targetContentId = `content-${serviceId}`;
          const allMobileDropdownContents = document.querySelectorAll('#service2_accordion_container .dropdown_content');
          const targetContentElement = document.getElementById(targetContentId);

          if (!targetContentElement) {
            console.warn(`MOBILE_ACCORDION: Content for service ID "${serviceId}" not found.`);
            return;
          }

          console.log(`MOBILE_ACCORDION: Activating accordion for ${targetContentId}.`);

          // Update accordion states: open target, close others
          allMobileDropdownContents.forEach(contentEl => {
            const button = contentEl.previousElementSibling;
            const icon = button ? button.querySelector('i') : null;

            if (contentEl.id === targetContentId) {
              // Set maxHeight to open the target. scrollHeight gives the content's natural height.
              const currentScrollHeight = contentEl.scrollHeight;
              contentEl.style.maxHeight = currentScrollHeight + "px";
              // console.log(`MOBILE_ACCORDION: Opening ${contentEl.id}, scrollHeight: ${currentScrollHeight}, new maxHeight: ${contentEl.style.maxHeight}`);
              if (icon) {
                icon.classList.remove('bi-arrow-down-square');
                icon.classList.add('bi-arrow-up-square');
              }
            } else {
              // If this element was open, log that we're closing it
              // if (contentEl.style.maxHeight && contentEl.style.maxHeight !== "0px" && contentEl.style.maxHeight !== null) {
              //   console.log(`MOBILE_ACCORDION: Closing ${contentEl.id}`);
              // }
              contentEl.style.maxHeight = null; // Reverts to CSS max-height: 0, triggering closing animation
              if (icon) {
                icon.classList.remove('bi-arrow-up-square');
                icon.classList.add('bi-arrow-down-square');
              }
            }
          });

          // Scroll to the associated button *after* states are updated and animations have had time to progress
          const targetButtonId = `service2-btn-${serviceId}`;
          const targetButtonElement = document.getElementById(targetButtonId);

          if (targetButtonElement) {
            // Wait for CSS transitions to substantially complete (CSS transition is 0.35s)
            setTimeout(() => {
              console.log(`MOBILE_ACCORDION_SCROLL: Attempting to scroll to button ${targetButtonId} after delay.`);
              const navbarElement = document.querySelector('.navbar');
              // Provide a default navbar height if navbarElement isn't found for some reason, though it should be.
              const navbarHeight = navbarElement ? navbarElement.offsetHeight : 80; 

              const buttonRect = targetButtonElement.getBoundingClientRect();
              const buttonAbsoluteTop = buttonRect.top + window.pageYOffset;
              const offsetPosition = buttonAbsoluteTop - navbarHeight - 20; // 20px extra padding

              console.log(`MOBILE_ACCORDION_SCROLL: Navbar height: ${navbarHeight}`);
              console.log(`MOBILE_ACCORDION_SCROLL: Button rect.top (viewport): ${buttonRect.top}`);
              console.log(`MOBILE_ACCORDION_SCROLL: window.pageYOffset: ${window.pageYOffset}`);
              console.log(`MOBILE_ACCORDION_SCROLL: Calculated button absolute top: ${buttonAbsoluteTop}`);
              console.log(`MOBILE_ACCORDION_SCROLL: Target scroll position: ${offsetPosition}`);

              window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
              });
            }, 400); // Increased delay to 400ms (CSS transition is 350ms)
          } else {
            console.warn(`MOBILE_ACCORDION_SCROLL: Target button ${targetButtonId} not found for scrolling.`);
          }
        };

        // Handles clicks from footer links
        window.updateServiceByTitleFromFooter = function(serviceTitle) {
          if (!window.allServicesData || window.allServicesData.length === 0) {
            console.warn("Service data not loaded yet for footer link action.");
            return;
          }
          const service = window.allServicesData.find(s => s.title === serviceTitle);
          if (!service) {
            console.warn(`Service with title "${serviceTitle}" not found for footer link.`);
            return;
          }
          
          const servicesSection = document.getElementById('services'); // Fallback scroll target

          if (window.innerWidth <= 1200) { // Mobile view
            window.activateMobileServiceAccordion(service.id);
            // Scrolling is handled within activateMobileServiceAccordion
            } else { // Desktop view
              window.displayServiceInDesktopView(service.id); // Updates content and sets active button for the CLICKED service

              setTimeout(() => {
                  const clickedButtonId = `service1-btn-${service.id}`;
                  const clickedButtonElement = document.getElementById(clickedButtonId);
                  const navbarElement = document.querySelector('.navbar');
                  const servicesSection = document.getElementById('services');
                  
                  // Ensure service1ButtonsContainer is defined and accessible in this scope
                  // It should be defined at the top of your DOMContentLoaded listener
                  // const service1ButtonsContainer = document.getElementById("service1_buttons_container"); 

                  if (!clickedButtonElement) {
                      console.warn("DESKTOP_SCROLL: Clicked service button NOT FOUND:", clickedButtonId);
                      if (servicesSection) servicesSection.scrollIntoView({ behavior: 'smooth' });
                      return;
                  }
                  if (!navbarElement) {
                      console.warn("DESKTOP_SCROLL: Navbar element not found. Cannot calculate precise offset.");
                      // Fallback: scroll clicked button to top of viewport (might be under navbar)
                      clickedButtonElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                      return;
                  }

                  const allDesktopButtons = Array.from(service1ButtonsContainer.querySelectorAll('.btn_service'));
                  const numButtons = allDesktopButtons.length;
                  let scrollTargetButtonElement = clickedButtonElement; // Default to the actually clicked button

                  if (numButtons >= 4) {
                      const targetIndex = allDesktopButtons.findIndex(btn => btn.id === clickedButtonId);

                      // If the clicked button is one of the last three (index numButtons-3, numButtons-2, or numButtons-1)
                      if (targetIndex !== -1 && targetIndex >= numButtons - 3) {
                          const fourthLastButtonIndex = numButtons - 4;
                          if (allDesktopButtons[fourthLastButtonIndex]) {
                              scrollTargetButtonElement = allDesktopButtons[fourthLastButtonIndex];
                              console.log(`DESKTOP_SCROLL: Adjusting scroll. Clicked: ${clickedButtonId}, Scrolling to 4th-last: ${scrollTargetButtonElement.id}`);
                          }
                      }
                  }

                  // Now calculate scroll position based on the scrollTargetButtonElement
                  console.log("DESKTOP_SCROLL: Final scroll target button:", scrollTargetButtonElement.id);
                  const navbarHeight = navbarElement.offsetHeight;
                  const buttonRect = scrollTargetButtonElement.getBoundingClientRect();
                  const buttonAbsoluteTop = buttonRect.top + window.pageYOffset;
                  const offsetPosition = buttonAbsoluteTop - navbarHeight - 20; // 20px extra padding

                  console.log("DESKTOP_SCROLL: Navbar height:", navbarHeight);
                  console.log("DESKTOP_SCROLL: Target button rect.top (viewport):", buttonRect.top);
                  console.log("DESKTOP_SCROLL: window.pageYOffset:", window.pageYOffset);
                  console.log("DESKTOP_SCROLL: Target button absolute top:", buttonAbsoluteTop);
                  console.log("DESKTOP_SCROLL: Final target scroll position (offsetPosition):", offsetPosition);

                  window.scrollTo({
                      top: offsetPosition,
                      behavior: 'smooth'
                  });

              }, 0); // setTimeout
          }
        };

        // Resize listener
        window.addEventListener("resize", () => {
          if (window.innerWidth <= 1200) { 
            document.querySelectorAll('#service1_buttons_container .btn_service').forEach(btn => {
              btn.classList.remove("active"); 
            });
          } else { 
            if (lastActiveDesktopButtonId) {
              const lastActiveBtnEl = document.getElementById(lastActiveDesktopButtonId);
              if (lastActiveBtnEl && !lastActiveBtnEl.classList.contains('active')) {
                document.querySelectorAll('#service1_buttons_container .btn_service').forEach(btn => btn.classList.remove('active'));
                lastActiveBtnEl.classList.add("active");
              }
            } else if (window.allServicesData && window.allServicesData.length > 0) {
              const currentActive = document.querySelector('#service1_buttons_container .btn_service.active');
              if (!currentActive) {
                window.displayServiceInDesktopView(window.allServicesData[0].id);
              }
            }
          }
        });

        fetchServices();
      });
    </script>

    <script>
      window.addEventListener("scroll", function () {
        const navbar = document.querySelector(".navbar");
        const logoImg = document.querySelector("#navbar_logo");
        const mobileMenu = document.getElementById("mobileMenu"); 
        const burger = document.querySelector("#burger");

        if (!mobileMenu.classList.contains("active")) { 
            if (window.scrollY > 0) {
            navbar.classList.add("active");
            if (logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
            } else {
            navbar.classList.remove("active");
            if (logoImg) logoImg.src = "assets/img/LogoFinal_white_transparent.png";
            }
        } else { 
            navbar.classList.add("active");
            if (logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
        }
      });

      document.addEventListener("DOMContentLoaded", () => {
        const logoImg = document.querySelector("#navbar_logo");
        if (logoImg && window.scrollY === 0 && !document.getElementById("mobileMenu").classList.contains("active")) {
          logoImg.src = "assets/img/LogoFinal_white_transparent.png";
        } else {
            if(logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
        }
      });
    </script>

    <script>
      const sections = document.querySelectorAll("section[id]");
      const navLinks = document.querySelectorAll(".navbar_right1 .nav_link"); 

      window.addEventListener("scroll", () => {
        let currentSectionId = "";
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          if (pageYOffset >= sectionTop - 150) { 
            currentSectionId = section.getAttribute("id");
          }
        });

        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.getAttribute("href") === `#${currentSectionId}`) {
            link.classList.add("active");
          }
        });
      });
    </script>

    <script>
      function toggleMenu() {
        const navbar = document.querySelector(".navbar");
        const burger = document.querySelector("#burger");
        const logoImg = document.querySelector("#navbar_logo");
        const menu = document.getElementById("mobileMenu");

        menu.classList.toggle("active");
        if (menu.classList.contains("active")) {
            navbar.classList.add("active"); 
            if (logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
            if (burger) {
                burger.classList.remove("bi-three-dots-vertical");
                burger.classList.add("bi-three-dots");
            }
        } else {
            if (window.scrollY === 0) {
                navbar.classList.remove("active");
                if (logoImg) logoImg.src = "assets/img/LogoFinal_white_transparent.png";
            } else {
                 navbar.classList.add("active"); 
                 if (logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
            }
            if (burger) {
                burger.classList.remove("bi-three-dots");
                burger.classList.add("bi-three-dots-vertical");
            }
        }
      }

      window.addEventListener("resize", () => {
        const menu = document.getElementById("mobileMenu");
        const navbar = document.querySelector(".navbar");
        const logoImg = document.querySelector("#navbar_logo");
        const burger = document.querySelector("#burger");

        if (window.innerWidth >= 768) { 
          if (menu.classList.contains("active")) {
            menu.classList.remove("active");
            if (window.scrollY === 0) {
                navbar.classList.remove("active");
                if (logoImg) logoImg.src = "assets/img/LogoFinal_white_transparent.png";
            } else {
                navbar.classList.add("active");
                if (logoImg) logoImg.src = "assets/img/LogoFinal_transparent.png";
            }
            if (burger) {
                burger.classList.remove("bi-three-dots");
                burger.classList.add("bi-three-dots-vertical");
            }
          }
        }
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      xintegrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      xintegrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
